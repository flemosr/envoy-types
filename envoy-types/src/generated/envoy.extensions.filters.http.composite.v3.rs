// This file is @generated by prost-build.
/// :ref:`Composite filter <config_http_filters_composite>` config. The composite filter config
/// allows delegating filter handling to another filter as determined by matching on the request
/// headers. This makes it possible to use different filters or filter configurations based on the
/// incoming request.
///
///
/// This is intended to be used with
/// : ref:`ExtensionWithMatcher <envoy_v3_api_msg_extensions.common.matching.v3.ExtensionWithMatcher>`
///   where a match tree is specified that indicates (via
/// : ref:`ExecuteFilterAction <envoy_v3_api_msg_extensions.filters.http.composite.v3.ExecuteFilterAction>`)
///   which filter configuration to create and delegate to.
#[derive(Clone, PartialEq, ::prost::Message)]
pub struct Composite {
    ///
    /// Named filter chain definitions that can be referenced from
    /// : ref:`ExecuteFilterAction.filter_chain_name  <envoy_v3_api_field_extensions.filters.http.composite.v3.ExecuteFilterAction.filter_chain_name>`.
    ///   The filter chains are compiled at configuration time and can be referenced by name.
    ///   This is useful when the same filter chain needs to be applied across many routes,
    ///   as it avoids duplicating the filter chain configuration.
    #[prost(map = "string, message", tag = "1")]
    pub named_filter_chains: ::std::collections::HashMap<
        ::prost::alloc::string::String,
        FilterChainConfiguration,
    >,
}
impl ::prost::Name for Composite {
    const NAME: &'static str = "Composite";
    const PACKAGE: &'static str = "envoy.extensions.filters.http.composite.v3";
    fn full_name() -> ::prost::alloc::string::String {
        "envoy.extensions.filters.http.composite.v3.Composite".into()
    }
    fn type_url() -> ::prost::alloc::string::String {
        "type.googleapis.com/envoy.extensions.filters.http.composite.v3.Composite".into()
    }
}
/// A list of filter configurations to be called in order. Note that this can be used as the type
/// inside of an ECDS :ref:`TypedExtensionConfig  <envoy_v3_api_msg_config.core.v3.TypedExtensionConfig>` extension, which allows a chain of
/// filters to be configured dynamically. In that case, the types of all filters in the chain must
/// be present in the :ref:`ExtensionConfigSource.type_urls  <envoy_v3_api_field_config.core.v3.ExtensionConfigSource.type_urls>` field.
#[derive(Clone, PartialEq, ::prost::Message)]
pub struct FilterChainConfiguration {
    #[prost(message, repeated, tag = "1")]
    pub typed_config: ::prost::alloc::vec::Vec<
        super::super::super::super::super::config::core::v3::TypedExtensionConfig,
    >,
}
impl ::prost::Name for FilterChainConfiguration {
    const NAME: &'static str = "FilterChainConfiguration";
    const PACKAGE: &'static str = "envoy.extensions.filters.http.composite.v3";
    fn full_name() -> ::prost::alloc::string::String {
        "envoy.extensions.filters.http.composite.v3.FilterChainConfiguration".into()
    }
    fn type_url() -> ::prost::alloc::string::String {
        "type.googleapis.com/envoy.extensions.filters.http.composite.v3.FilterChainConfiguration"
            .into()
    }
}
/// Configuration for an extension configuration discovery service with name.
#[derive(Clone, PartialEq, ::prost::Message)]
pub struct DynamicConfig {
    /// The name of the extension configuration. It also serves as a resource name in ExtensionConfigDS.
    /// The resource type in the `DiscoveryRequest` will be :ref:`TypedExtensionConfig  <envoy_v3_api_msg_config.core.v3.TypedExtensionConfig>`.
    #[prost(string, tag = "1")]
    pub name: ::prost::alloc::string::String,
    /// Configuration source specifier for an extension configuration discovery
    /// service. In case of a failure and without the default configuration,
    /// 500(Internal Server Error) will be returned.
    #[prost(message, optional, tag = "2")]
    pub config_discovery: ::core::option::Option<
        super::super::super::super::super::config::core::v3::ExtensionConfigSource,
    >,
}
impl ::prost::Name for DynamicConfig {
    const NAME: &'static str = "DynamicConfig";
    const PACKAGE: &'static str = "envoy.extensions.filters.http.composite.v3";
    fn full_name() -> ::prost::alloc::string::String {
        "envoy.extensions.filters.http.composite.v3.DynamicConfig".into()
    }
    fn type_url() -> ::prost::alloc::string::String {
        "type.googleapis.com/envoy.extensions.filters.http.composite.v3.DynamicConfig"
            .into()
    }
}
/// Composite match action (see :ref:`matching docs <arch_overview_matching_api>` for more info on match actions).
/// This specifies the filter configuration of the filter that the composite filter should delegate filter interactions to.
/// \[\#next-free-field: 6\]
#[derive(Clone, PartialEq, ::prost::Message)]
pub struct ExecuteFilterAction {
    /// Filter specific configuration which depends on the filter being
    /// instantiated. See the supported filters for further documentation.
    /// Only one of `typed_config`, `dynamic_config`, `filter_chain`, or `filter_chain_name`
    /// can be set.
    /// \[\#extension-category: envoy.filters.http\]
    #[prost(message, optional, tag = "1")]
    pub typed_config: ::core::option::Option<
        super::super::super::super::super::config::core::v3::TypedExtensionConfig,
    >,
    /// Dynamic configuration of filter obtained via extension configuration discovery service.
    /// Only one of `typed_config`, `dynamic_config`, `filter_chain`, or `filter_chain_name`
    /// can be set.
    #[prost(message, optional, tag = "2")]
    pub dynamic_config: ::core::option::Option<DynamicConfig>,
    /// An inlined list of filter configurations. The specified filters will be executed in order.
    /// Only one of `typed_config`, `dynamic_config`, `filter_chain`, or `filter_chain_name`
    /// can be set.
    #[prost(message, optional, tag = "4")]
    pub filter_chain: ::core::option::Option<FilterChainConfiguration>,
    ///
    /// The name of a filter chain defined in
    /// : ref:`Composite.named_filter_chains  <envoy_v3_api_field_extensions.filters.http.composite.v3.Composite.named_filter_chains>`.
    ///   At runtime, if the named filter chain is not found in the Composite filter's configuration,
    ///   no filter will be applied for this match (the action is silently skipped).
    ///   Only one of `typed_config`, `dynamic_config`, `filter_chain`, or `filter_chain_name`
    ///   can be set.
    #[prost(string, tag = "5")]
    pub filter_chain_name: ::prost::alloc::string::String,
    ///
    /// Probability of the action execution. If not specified, this is 100%.
    /// This allows sampling behavior for the configured actions.
    /// For example, if
    /// : ref:`default_value <envoy_v3_api_field_config.core.v3.RuntimeFractionalPercent.default_value>`
    ///   under the `sample_percent` is configured with 30%, a dice roll with that
    ///   probability is done. The underline action will only be executed if the
    ///   dice roll returns positive. Otherwise, the action is skipped.
    #[prost(message, optional, tag = "3")]
    pub sample_percent: ::core::option::Option<
        super::super::super::super::super::config::core::v3::RuntimeFractionalPercent,
    >,
}
impl ::prost::Name for ExecuteFilterAction {
    const NAME: &'static str = "ExecuteFilterAction";
    const PACKAGE: &'static str = "envoy.extensions.filters.http.composite.v3";
    fn full_name() -> ::prost::alloc::string::String {
        "envoy.extensions.filters.http.composite.v3.ExecuteFilterAction".into()
    }
    fn type_url() -> ::prost::alloc::string::String {
        "type.googleapis.com/envoy.extensions.filters.http.composite.v3.ExecuteFilterAction"
            .into()
    }
}
